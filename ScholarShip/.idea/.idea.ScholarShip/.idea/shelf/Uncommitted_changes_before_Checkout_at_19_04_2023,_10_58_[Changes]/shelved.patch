Index: ScholarShip/Data/ApplicationDbContext.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using Duende.IdentityServer.EntityFramework.Options;\nusing Microsoft.AspNetCore.ApiAuthorization.IdentityServer;\nusing Microsoft.EntityFrameworkCore;\nusing Microsoft.Extensions.Options;\nusing ScholarShip.Models;\nusing MongoDB.Driver;\n\n\nnamespace ScholarShip.Data\n{\n\tpublic class ApplicationDbContext : DbContext\n\t{\n\t\tprivate readonly IMongoDatabase _database;\n\t\tpublic ApplicationDbContext(IOptions<MongoDbOptions> options)\n\t\t{\n\t\t\tvar client = new MongoClient(options.Value.ConnectionString);\n\t\t\t_database = client.GetDatabase(options.Value.DatabaseName);\n\t\t}\n\n\t\tpublic IMongoCollection<T> GetCollection<T>() => _database.GetCollection<T>(typeof(T).Name);\n\t}\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ScholarShip/Data/ApplicationDbContext.cs b/ScholarShip/Data/ApplicationDbContext.cs
--- a/ScholarShip/Data/ApplicationDbContext.cs	
+++ b/ScholarShip/Data/ApplicationDbContext.cs	
@@ -8,13 +8,13 @@
 
 namespace ScholarShip.Data
 {
-	public class ApplicationDbContext : DbContext
+	public class ApplicationDbContext 
 	{
 		private readonly IMongoDatabase _database;
-		public ApplicationDbContext(IOptions<MongoDbOptions> options)
+		public ApplicationDbContext(IConfiguration configuration)
 		{
-			var client = new MongoClient(options.Value.ConnectionString);
-			_database = client.GetDatabase(options.Value.DatabaseName);
+			var client = new MongoClient(configuration.GetConnectionString("MongoDB"));
+			_database = client.GetDatabase(configuration.GetSection("MongoDB:Database").Value);
 		}
 
 		public IMongoCollection<T> GetCollection<T>() => _database.GetCollection<T>(typeof(T).Name);
Index: ScholarShip/Program.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using Microsoft.AspNetCore.Authentication;\nusing Microsoft.AspNetCore.Identity;\nusing Microsoft.AspNetCore.Identity.UI;\nusing Microsoft.EntityFrameworkCore;\nusing ScholarShip.Data;\nusing ScholarShip.Models;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add services to the container.\n//var connectionString = builder.Configuration.GetConnectionString(\"DefaultConnection\") ?? throw new InvalidOperationException(\"Connection string 'DefaultConnection' not found.\");\n//builder.Services.AddDbContext<ApplicationDbContext>(options =>\n\t//options.UseSqlServer(connectionString));\nbuilder.Services.Configure<MongoDbOptions>(Configuration.GetSection(\"MongoDbOptions\"));\nbuilder.Services.AddScoped<ApplicationDbContext>();\n\n\nbuilder.Services.AddDatabaseDeveloperPageExceptionFilter();\n\nbuilder.Services.AddDefaultIdentity<ApplicationUser>(options => options.SignIn.RequireConfirmedAccount = false)\n\t.AddEntityFrameworkStores<ApplicationDbContext>();\n\nbuilder.Services.AddIdentityServer()\n\t.AddApiAuthorization<ApplicationUser, ApplicationDbContext>();\n\nbuilder.Services.AddAuthentication()\n\t.AddIdentityServerJwt();\n\nbuilder.Services.AddControllersWithViews();\nbuilder.Services.AddRazorPages();\n\nvar app = builder.Build();\n\n// Configure the HTTP request pipeline.\nif (app.Environment.IsDevelopment())\n{\n\tapp.UseMigrationsEndPoint();\n}\nelse\n{\n\t// The default HSTS value is 30 days. You may want to change this for production scenarios, see https://aka.ms/aspnetcore-hsts.\n\tapp.UseHsts();\n}/*\n\napp.UseHttpsRedirection();\napp.UseStaticFiles();\napp.UseRouting();\n\napp.UseAuthentication();\napp.UseIdentityServer();\napp.UseAuthorization();\n\napp.MapControllerRoute(\n\tname: \"default\",\n\tpattern: \"{controller}/{action=Index}/{id?}\");\napp.MapRazorPages();\n\napp.MapFallbackToFile(\"index.html\");\n\napp.Run();\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ScholarShip/Program.cs b/ScholarShip/Program.cs
--- a/ScholarShip/Program.cs	
+++ b/ScholarShip/Program.cs	
@@ -2,6 +2,7 @@
 using Microsoft.AspNetCore.Identity;
 using Microsoft.AspNetCore.Identity.UI;
 using Microsoft.EntityFrameworkCore;
+using MongoDB.Driver;
 using ScholarShip.Data;
 using ScholarShip.Models;
 
@@ -11,8 +12,11 @@
 //var connectionString = builder.Configuration.GetConnectionString("DefaultConnection") ?? throw new InvalidOperationException("Connection string 'DefaultConnection' not found.");
 //builder.Services.AddDbContext<ApplicationDbContext>(options =>
 	//options.UseSqlServer(connectionString));
-builder.Services.Configure<MongoDbOptions>(Configuration.GetSection("MongoDbOptions"));
-builder.Services.AddScoped<ApplicationDbContext>();
+builder.Services.AddSingleton<IMongoClient>(new MongoClient(builder.Configuration.GetConnectionString("MongoDB")));
+builder.Services.AddSingleton<IMongoDatabase>(x => x.GetRequiredService<IMongoClient>().GetDatabase(builder.Configuration.GetSection("MongoDB:Database").Value));
+
+
+//builder.Services.AddScoped<ApplicationDbContext>();
 
 
 builder.Services.AddDatabaseDeveloperPageExceptionFilter();
Index: ScholarShip/ScholarShip.csproj
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><Project Sdk=\"Microsoft.NET.Sdk.Web\">\n\n  <PropertyGroup>\n    <TargetFramework>net7.0</TargetFramework>\n    <Nullable>enable</Nullable>\n    <TypeScriptCompileBlocked>true</TypeScriptCompileBlocked>\n    <TypeScriptToolsVersion>Latest</TypeScriptToolsVersion>\n    <IsPackable>false</IsPackable>\n    <SpaRoot>ClientApp\\</SpaRoot>\n    <DefaultItemExcludes>$(DefaultItemExcludes);$(SpaRoot)node_modules\\**</DefaultItemExcludes>\n    <SpaProxyServerUrl>https://localhost:44458</SpaProxyServerUrl>\n    <SpaProxyLaunchCommand>npm start</SpaProxyLaunchCommand>\n    <ImplicitUsings>enable</ImplicitUsings>\n  </PropertyGroup>\n\n  <ItemGroup>\n    <PackageReference Include=\"Microsoft.AspNetCore.ApiAuthorization.IdentityServer\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.AspNetCore.Identity.EntityFrameworkCore\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.AspNetCore.Identity.UI\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.AspNetCore.SpaProxy\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Relational\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.SqlServer\" Version=\"7.0.2\" />\n    <PackageReference Include=\"Microsoft.EntityFrameworkCore.Tools\" Version=\"7.0.2\" />\n    <PackageReference Include=\"MongoDB.Driver\" Version=\"2.19.1\" />\n    <PackageReference Include=\"MongoDB.Driver.Core\" Version=\"2.19.1\" />\n  </ItemGroup>\n\n  <ItemGroup>\n    <!-- Don't publish the SPA source files, but do show them in the project files list -->\n    <Content Remove=\"$(SpaRoot)**\" />\n    <None Remove=\"$(SpaRoot)**\" />\n    <None Include=\"$(SpaRoot)**\" Exclude=\"$(SpaRoot)node_modules\\**\" />\n  </ItemGroup>\n\n  <Target Name=\"DebugEnsureNodeEnv\" BeforeTargets=\"Build\" Condition=\" '$(Configuration)' == 'Debug' And !Exists('$(SpaRoot)node_modules') \">\n    <!-- Ensure Node.js is installed -->\n    <Exec Command=\"node --version\" ContinueOnError=\"true\">\n      <Output TaskParameter=\"ExitCode\" PropertyName=\"ErrorCode\" />\n    </Exec>\n    <Error Condition=\"'$(ErrorCode)' != '0'\" Text=\"Node.js is required to build and run this project. To continue, please install Node.js from https://nodejs.org/, and then restart your command prompt or IDE.\" />\n    <Message Importance=\"high\" Text=\"Restoring dependencies using 'npm'. This may take several minutes...\" />\n    <Exec WorkingDirectory=\"$(SpaRoot)\" Command=\"npm install\" />\n  </Target>\n\n  <Target Name=\"PublishRunWebpack\" AfterTargets=\"ComputeFilesToPublish\">\n    <!-- As part of publishing, ensure the JS resources are freshly built in production mode -->\n    <Exec WorkingDirectory=\"$(SpaRoot)\" Command=\"npm install\" />\n    <Exec WorkingDirectory=\"$(SpaRoot)\" Command=\"npm run build\" />\n\n    <!-- Include the newly-built files in the publish output -->\n    <ItemGroup>\n      <DistFiles Include=\"$(SpaRoot)build\\**\" />\n      <ResolvedFileToPublish Include=\"@(DistFiles->'%(FullPath)')\" Exclude=\"@(ResolvedFileToPublish)\">\n        <RelativePath>wwwroot\\%(RecursiveDir)%(FileName)%(Extension)</RelativePath>\n        <CopyToPublishDirectory>PreserveNewest</CopyToPublishDirectory>\n        <ExcludeFromSingleFile>true</ExcludeFromSingleFile>\n      </ResolvedFileToPublish>\n    </ItemGroup>\n  </Target>\n</Project>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ScholarShip/ScholarShip.csproj b/ScholarShip/ScholarShip.csproj
--- a/ScholarShip/ScholarShip.csproj	
+++ b/ScholarShip/ScholarShip.csproj	
@@ -17,6 +17,7 @@
     <PackageReference Include="Microsoft.AspNetCore.ApiAuthorization.IdentityServer" Version="7.0.2" />
     <PackageReference Include="Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore" Version="7.0.2" />
     <PackageReference Include="Microsoft.AspNetCore.Identity.EntityFrameworkCore" Version="7.0.2" />
+    <PackageReference Include="Microsoft.AspNetCore.Identity.MongoDB" Version="1.0.2" />
     <PackageReference Include="Microsoft.AspNetCore.Identity.UI" Version="7.0.2" />
     <PackageReference Include="Microsoft.AspNetCore.SpaProxy" Version="7.0.2" />
     <PackageReference Include="Microsoft.EntityFrameworkCore.Relational" Version="7.0.2" />
Index: ScholarShip/appsettings.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n  \"MongoDBOptions\": {\n    \"ConnectionString\": \"mongodb+srv://202010725:Scholarship@scholarship.aevrjct.mongodb.net/?retryWrites=true&w=majority\",\n    \"DatabaseName\": \"Scholarship\"\n  },\n  \"Logging\": {\n      \"LogLevel\": {\n      \"Default\": \"Information\",\n      \"Microsoft\": \"Warning\",\n      \"Microsoft.Hosting.Lifetime\": \"Information\"\n      }\n    },\n  \"IdentityServer\": {\n    \"Clients\": {\n      \"ScholarShip\": {\n        \"Profile\": \"IdentityServerSPA\"\n      }\n    }\n  },\n\"AllowedHosts\": \"*\"\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ScholarShip/appsettings.json b/ScholarShip/appsettings.json
--- a/ScholarShip/appsettings.json	
+++ b/ScholarShip/appsettings.json	
@@ -1,8 +1,10 @@
 {
-  "MongoDBOptions": {
-    "ConnectionString": "mongodb+srv://202010725:Scholarship@scholarship.aevrjct.mongodb.net/?retryWrites=true&w=majority",
-    "DatabaseName": "Scholarship"
+  "ConnectionStrings": {
+    "MongoDB": "mongodb+srv://202010725:Scholarship@scholarship.aevrjct.mongodb.net/?retryWrites=true&w=majority",
   },
+"MongoDb":{
+  "Database": "ScholarShip"
+},
   "Logging": {
       "LogLevel": {
       "Default": "Information",
